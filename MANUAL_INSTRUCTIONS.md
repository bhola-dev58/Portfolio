# Manual Guide: Making Projects Dynamic

Follow these 3 steps to move your Projects to Supabase and manage them from the Admin Dashboard.

---

## Step 1: Run SQL in Supabase
Go to your **Supabase Dashboard** -> **SQL Editor**, paste this code, and click **Run**.
*This creates the table, sets up security, and inserts your current projects automatically.*

```sql
-- 1. Create the Projects table
create table projects (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text not null,
  period text not null,
  description text not null,
  highlights text[] not null, -- Array of bullet points
  tags text[] not null        -- Array of tags (e.g., 'React', 'Java')
);

-- 2. Enable Security (RLS)
alter table projects enable row level security;

-- 3. Allow everyone to VIEW (read-only)
create policy "Public projects are viewable by everyone."
  on projects for select
  using ( true );

-- 4. Allow Admin to ADD/EDIT/DELETE
create policy "Enable insert for authenticated users only"
  on projects for insert to authenticated with check (true);

create policy "Enable update for authenticated users only"
  on projects for update to authenticated using (true) with check (true);

create policy "Enable delete for authenticated users only"
  on projects for delete to authenticated using (true);

-- 5. Insert your EXISTING Projects (so you don't lose them!)
insert into projects (title, period, description, highlights, tags)
values
  (
    'DebugVerse - AI-Based Code Debugger',
    'Mar 2025 – Apr 2025',
    'Full-stack code debugger with FastAPI and ReactJS, using Gemini API for real-time AI-powered debugging',
    ARRAY['Multi-language support (Python, Java, C++)', 'Markdown-based fixes and secure input via dotenv', 'Responsive UI with live editor and syntax highlighting'],
    ARRAY['FastAPI', 'React.js', 'Gemini API', 'Python']
  ),
  (
    'CareMate-AI - Healthcare Chat-bot',
    'Jan 2025 – Feb 2025',
    'AI-powered chat-bot using Streamlit and Generative-AI''s Gemini API for real-time health query responses',
    ARRAY['Predefined responses for frequent queries, reducing API calls by 30%', 'Interactive chat UI with dynamic message rendering', 'State management using Streamlit'],
    ARRAY['Python', 'Streamlit', 'Gemini API', 'NLP']
  ),
  (
    'JLiveChats - Real-Time Chat Application',
    'Aug 2024 – Sep 2024',
    'Java-based real-time chat application with client-server architecture',
    ARRAY['Java Sockets for real-time messaging', 'Multi-user communication support', 'Responsive UI with AWT and Swing'],
    ARRAY['Java', 'Sockets', 'AWT', 'Swing']
  );
```

---

## Step 2: Update `src/components/Projects.tsx`
Replace the **ENTIRE** content of `src/components/Projects.tsx` with this code.

```tsx
import { motion } from "framer-motion";
import { useInView } from "framer-motion";
import { useRef, useEffect, useState } from "react";
import { Card } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { ExternalLink } from "lucide-react";
import { supabase } from "@/lib/supabase";

interface Project {
  id: number;
  title: string;
  period: string;
  description: string;
  highlights: string[];
  tags: string[];
}

export const Projects = () => {
  const ref = useRef(null);
  const isInView = useInView(ref, { once: true, margin: "-100px" });
  const [projects, setProjects] = useState<Project[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function fetchProjects() {
      const { data, error } = await supabase
        .from("projects")
        .select("*")
        .order("id", { ascending: false });

      if (!error && data) {
        setProjects(data);
      }
      setLoading(false);
    }
    fetchProjects();
  }, []);

  if (loading) return null; // Or a loading spinner

  return (
    <section id="projects" className="min-h-screen flex items-center py-20 px-4">
      <div className="container mx-auto" ref={ref}>
        <motion.div
          initial={{ opacity: 0, y: 50 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.8 }}
        >
          <h2 className="text-4xl md:text-5xl font-bold mb-16 text-center">
            Featured <span className="text-gradient">Projects</span>
          </h2>

          <div className="max-w-5xl mx-auto relative">
            {/* Timeline line */}
            <div className="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-secondary via-primary to-secondary/20 md:-translate-x-1/2" />

            <div className="space-y-16 md:space-y-20">
              {projects.map((project, index) => (
                <motion.div
                  key={project.id}
                  initial={{ opacity: 0, x: index % 2 === 0 ? 50 : -50 }}
                  animate={{ opacity: 1, x: 0 }}
                  transition={{ duration: 0.8, delay: index * 0.2 }}
                  className="relative"
                >
                  {/* Timeline connector line (mobile only) */}
                  <div className="absolute left-4 top-6 w-12 h-0.5 bg-gradient-to-r from-primary to-transparent md:hidden" />

                  {/* Timeline dot */}
                  <div className="absolute left-4 top-6 -translate-x-1/2 md:left-1/2 md:-translate-x-1/2 z-10">
                    <div className="w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center border-4 border-background shadow-lg">
                      <ExternalLink className="w-5 h-5 text-white" />
                    </div>
                  </div>

                  {/* Content wrapper */}
                  <div className="md:grid md:grid-cols-2 md:gap-12">
                    {/* ZIGZAG LOGIC */}
                    {/* Left Column (Desktop) */}
                    <div className="hidden md:block">
                      {index % 2 !== 0 && (
                        <ProjectCard project={project} />
                      )}
                    </div>

                    {/* Right Column (Desktop & Mobile) */}
                    <div className="ml-12 md:ml-0">
                      {/* Mobile Card (Always show here on mobile) */}
                      <div className="md:hidden">
                        <ProjectCard project={project} />
                      </div>
                      
                      {/* Desktop Card (Show here for even indices) */}
                      <div className="hidden md:block">
                        {index % 2 === 0 && (
                          <ProjectCard project={project} />
                        )}
                      </div>
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>
          </div>
        </motion.div>
      </div>
    </section>
  );
};

// Extracted Card to avoid code duplication
const ProjectCard = ({ project }: { project: Project }) => (
  <Card className="p-6 card-shadow bg-card/50 backdrop-blur-sm border-border/50 hover:border-primary/50 transition-all group">
    <div className="inline-block px-3 py-1 rounded-full bg-secondary/10 text-secondary text-xs font-semibold mb-3">
      {project.period}
    </div>

    <h3 className="text-lg md:text-xl font-bold text-foreground group-hover:text-primary transition-colors mb-3 break-words">
      {project.title}
    </h3>

    <p className="text-sm md:text-base text-muted-foreground mb-4 break-words">
      {project.description}
    </p>

    <ul className="space-y-2 mb-4">
      {project.highlights.map((highlight, i) => (
        <li key={i} className="text-sm text-muted-foreground flex items-start">
          <span className="text-secondary mr-2 shrink-0">▸</span>
          <span className="break-words">{highlight}</span>
        </li>
      ))}
    </ul>

    <div className="flex flex-wrap gap-2">
      {project.tags.map((tag, i) => (
        <Badge
          key={i}
          variant="outline"
          className="border-primary/50 text-primary text-xs"
        >
          {tag}
        </Badge>
      ))}
    </div>
  </Card>
);
```

---

## Step 3: Update `src/pages/AdminDashboard.tsx`
Replace the **ENTIRE** content of `src/pages/AdminDashboard.tsx` with this code. I added Tabs to manage both sections.

```tsx
import { useEffect, useState } from "react";
import { supabase } from "@/lib/supabase";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Pencil, Trash2, Plus, LogOut } from "lucide-react";
import { toast } from "sonner";
import { useNavigate } from "react-router-dom";

// Types
interface Experience {
  id: number;
  title: string;
  company_name: string;
  period: string;
  type: string;
  description: string[];
}

interface Project {
  id: number;
  title: string;
  period: string;
  description: string;
  highlights: string[];
  tags: string[];
}

const AdminDashboard = () => {
  const navigate = useNavigate();
  const [activeTab, setActiveTab] = useState("experience");

  // Auth Logout
  const handleLogout = async () => {
    await supabase.auth.signOut();
    navigate("/admin/login");
  };

  return (
    <div className="min-h-screen p-8 pt-24 space-y-8 container mx-auto">
      <div className="flex justify-between items-center">
        <h1 className="text-3xl font-bold">Admin Dashboard</h1>
        <Button variant="destructive" onClick={handleLogout} className="gap-2">
          <LogOut size={16} /> Logout
        </Button>
      </div>

      <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
        <TabsList className="grid w-full grid-cols-2 max-w-[400px]">
          <TabsTrigger value="experience">Experience</TabsTrigger>
          <TabsTrigger value="projects">Projects</TabsTrigger>
        </TabsList>
        
        <TabsContent value="experience">
          <ExperienceManager />
        </TabsContent>
        
        <TabsContent value="projects">
          <ProjectManager />
        </TabsContent>
      </Tabs>
    </div>
  );
};

// --- EXPERIENCE MANAGER COMPONENT ---
const ExperienceManager = () => {
  const [data, setData] = useState<Experience[]>([]);
  const [isOpen, setIsOpen] = useState(false);
  const [editingItem, setEditingItem] = useState<Experience | null>(null);

  // Form Fields
  const [title, setTitle] = useState("");
  const [company, setCompany] = useState("");
  const [period, setPeriod] = useState("");
  const [type, setType] = useState("Internship");
  const [desc, setDesc] = useState("");

  const fetchData = async () => {
    const { data } = await supabase.from("experiences").select("*").order("id", { ascending: false });
    if (data) setData(data);
  };

  useEffect(() => { fetchData(); }, []);

  const openModal = (item?: Experience) => {
    if (item) {
      setEditingItem(item);
      setTitle(item.title);
      setCompany(item.company_name);
      setPeriod(item.period);
      setType(item.type);
      setDesc(item.description.join("\n"));
    } else {
      setEditingItem(null);
      setTitle("");
      setCompany("");
      setPeriod("");
      setType("Internship");
      setDesc("");
    }
    setIsOpen(true);
  };

  const handleDelete = async (id: number) => {
    if (!confirm("Delete this?")) return;
    await supabase.from("experiences").delete().eq("id", id);
    fetchData();
    toast.success("Deleted");
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const payload = {
      title,
      company_name: company,
      period,
      type,
      description: desc.split("\n").filter(x => x.trim()),
    };

    if (editingItem) {
      await supabase.from("experiences").update(payload).eq("id", editingItem.id);
      toast.success("Updated");
    } else {
      await supabase.from("experiences").insert([payload]);
      toast.success("Created");
    }
    setIsOpen(false);
    fetchData();
  };

  return (
    <div className="space-y-4 mt-4">
      <div className="flex justify-end">
        <Button onClick={() => openModal()} className="gap-2"><Plus size={16} /> Add Experience</Button>
      </div>
      <div className="rounded-md border bg-card">
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead>Title</TableHead>
              <TableHead>Company</TableHead>
              <TableHead>Type</TableHead>
              <TableHead className="text-right">Actions</TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {data.map((item) => (
              <TableRow key={item.id}>
                <TableCell>{item.title}</TableCell>
                <TableCell>{item.company_name}</TableCell>
                <TableCell>{item.type}</TableCell>
                <TableCell className="text-right">
                  <Button variant="ghost" size="icon" onClick={() => openModal(item)}><Pencil size={16}/></Button>
                  <Button variant="ghost" size="icon" className="text-destructive" onClick={() => handleDelete(item.id)}><Trash2 size={16}/></Button>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </div>

      <Dialog open={isOpen} onOpenChange={setIsOpen}>
        <DialogContent>
          <DialogHeader><DialogTitle>{editingItem ? "Edit" : "Add"} Experience</DialogTitle></DialogHeader>
          <form onSubmit={handleSubmit} className="space-y-4">
            <Input placeholder="Title" value={title} onChange={e => setTitle(e.target.value)} required />
            <Input placeholder="Company" value={company} onChange={e => setCompany(e.target.value)} required />
            <Input placeholder="Period" value={period} onChange={e => setPeriod(e.target.value)} required />
            <Input placeholder="Type" value={type} onChange={e => setType(e.target.value)} required />
            <Textarea placeholder="Description (lines)" value={desc} onChange={e => setDesc(e.target.value)} className="h-32" required />
            <Button type="submit" className="w-full">Save</Button>
          </form>
        </DialogContent>
      </Dialog>
    </div>
  );
};

// --- PROJECT MANAGER COMPONENT ---
const ProjectManager = () => {
  const [data, setData] = useState<Project[]>([]);
  const [isOpen, setIsOpen] = useState(false);
  const [editingItem, setEditingItem] = useState<Project | null>(null);

  // Form Fields
  const [title, setTitle] = useState("");
  const [period, setPeriod] = useState("");
  const [desc, setDesc] = useState("");
  const [highlights, setHighlights] = useState("");
  const [tags, setTags] = useState("");

  const fetchData = async () => {
    const { data } = await supabase.from("projects").select("*").order("id", { ascending: false });
    if (data) setData(data);
  };

  useEffect(() => { fetchData(); }, []);

  const openModal = (item?: Project) => {
    if (item) {
      setEditingItem(item);
      setTitle(item.title);
      setPeriod(item.period);
      setDesc(item.description);
      setHighlights(item.highlights.join("\n"));
      setTags(item.tags.join(", "));
    } else {
      setEditingItem(null);
      setTitle("");
      setPeriod("");
      setDesc("");
      setHighlights("");
      setTags("");
    }
    setIsOpen(true);
  };

  const handleDelete = async (id: number) => {
    if (!confirm("Delete this?")) return;
    await supabase.from("projects").delete().eq("id", id);
    fetchData();
    toast.success("Deleted");
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const payload = {
      title,
      period,
      description: desc,
      highlights: highlights.split("\n").filter(x => x.trim()),
      tags: tags.split(",").map(x => x.trim()).filter(x => x),
    };

    if (editingItem) {
      await supabase.from("projects").update(payload).eq("id", editingItem.id);
      toast.success("Updated");
    } else {
      await supabase.from("projects").insert([payload]);
      toast.success("Created");
    }
    setIsOpen(false);
    fetchData();
  };

  return (
    <div className="space-y-4 mt-4">
      <div className="flex justify-end">
        <Button onClick={() => openModal()} className="gap-2"><Plus size={16} /> Add Project</Button>
      </div>
      <div className="rounded-md border bg-card">
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead>Title</TableHead>
              <TableHead>Period</TableHead>
              <TableHead className="text-right">Actions</TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {data.map((item) => (
              <TableRow key={item.id}>
                <TableCell>{item.title}</TableCell>
                <TableCell>{item.period}</TableCell>
                <TableCell className="text-right">
                  <Button variant="ghost" size="icon" onClick={() => openModal(item)}><Pencil size={16}/></Button>
                  <Button variant="ghost" size="icon" className="text-destructive" onClick={() => handleDelete(item.id)}><Trash2 size={16}/></Button>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </div>

      <Dialog open={isOpen} onOpenChange={setIsOpen}>
        <DialogContent>
          <DialogHeader><DialogTitle>{editingItem ? "Edit" : "Add"} Project</DialogTitle></DialogHeader>
          <form onSubmit={handleSubmit} className="space-y-4">
            <Input placeholder="Title" value={title} onChange={e => setTitle(e.target.value)} required />
            <Input placeholder="Period" value={period} onChange={e => setPeriod(e.target.value)} required />
            <Textarea placeholder="Description" value={desc} onChange={e => setDesc(e.target.value)} required />
            <Textarea placeholder="Highlights (one per line)" value={highlights} onChange={e => setHighlights(e.target.value)} className="h-24" required />
            <Input placeholder="Tags (comma separated, e.g. React, Java)" value={tags} onChange={e => setTags(e.target.value)} required />
            <Button type="submit" className="w-full">Save</Button>
          </form>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default AdminDashboard;
```
